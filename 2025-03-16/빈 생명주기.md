# ìŠ¤í”„ë§ ë¹ˆ ìƒëª…ì£¼ê¸°(Lifecycle)ì™€ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±

## 1. ìŠ¤í”„ë§ ë¹ˆ ìƒëª…ì£¼ê¸°ë€?
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ë©°, ì‚¬ìš©í•œ í›„ ì†Œë©¸ì‹œí‚¤ëŠ” ì¼ë ¨ì˜ ê³¼ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ **ìŠ¤í”„ë§ ë¹ˆì˜ ìƒëª…ì£¼ê¸°**ë¼ê³  í•©ë‹ˆë‹¤.

### ìŠ¤í”„ë§ ë¹ˆ ìƒëª…ì£¼ê¸° ì£¼ìš” ë‹¨ê³„
1. **ê°ì²´ ìƒì„±**: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë¹ˆì„ ìƒì„±í•©ë‹ˆë‹¤.
2. **ì˜ì¡´ì„± ì£¼ì…(DI, Dependency Injection)**: ë¹ˆì˜ í•„ë“œë‚˜ ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…í•©ë‹ˆë‹¤.
3. **ì´ˆê¸°í™”(Initialization)**: ë¹ˆì´ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ë©´ ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
4. **ì‚¬ìš©(Using the Bean)**: ë¹ˆì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
5. **ì†Œë©¸(Destroy)**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë  ë•Œ ë¹ˆì˜ ì†Œë©¸ ë©”ì„œë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

## 2. ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ë°©ë²•
ìŠ¤í”„ë§ì—ì„œëŠ” ë¹ˆì˜ ì´ˆê¸°í™”ì™€ ì†Œë©¸ ì‹œ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ë‹¤ì–‘í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

### 1) `@PostConstruct` ì™€ `@PreDestroy` (ê¶Œì¥ ë°©ë²•)
```java
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import org.springframework.stereotype.Component;

@Component
public class LifeCycleBean {
    
    public LifeCycleBean() {
        System.out.println("1. ë¹ˆ ê°ì²´ ìƒì„±: LifeCycleBean ìƒì„±ì í˜¸ì¶œ");
    }

    @PostConstruct
    public void init() {
        System.out.println("2. ì´ˆê¸°í™”: @PostConstruct ë©”ì„œë“œ ì‹¤í–‰");
    }

    @PreDestroy
    public void destroy() {
        System.out.println("3. ì†Œë©¸: @PreDestroy ë©”ì„œë“œ ì‹¤í–‰");
    }
}
```
#### ì„¤ëª…
- `@PostConstruct`: ë¹ˆì´ ìƒì„±ë˜ê³  ì˜ì¡´ì„±ì´ ì£¼ì…ëœ í›„ í˜¸ì¶œë¨.
- `@PreDestroy`: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œë¨.
- **ê°€ì¥ ê¶Œì¥ë˜ëŠ” ë°©ë²•**ìœ¼ë¡œ, ìŠ¤í”„ë§ì˜ ë¼ì´í”„ì‚¬ì´í´ ì¸í„°í˜ì´ìŠ¤ì™€ ê°•í•˜ê²Œ ê²°í•©ë˜ì§€ ì•ŠìŒ.

---

### 2) `InitializingBean`, `DisposableBean` ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ (ë¹„ì¶”ì²œ)
```java
import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.stereotype.Component;

@Component
public class LifeCycleBean implements InitializingBean, DisposableBean {

    public LifeCycleBean() {
        System.out.println("1. ë¹ˆ ê°ì²´ ìƒì„±: LifeCycleBean ìƒì„±ì í˜¸ì¶œ");
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("2. ì´ˆê¸°í™”: afterPropertiesSet() ë©”ì„œë“œ ì‹¤í–‰");
    }

    @Override
    public void destroy() throws Exception {
        System.out.println("3. ì†Œë©¸: destroy() ë©”ì„œë“œ ì‹¤í–‰");
    }
}
```
#### ì„¤ëª…
- `InitializingBean`ì˜ `afterPropertiesSet()` ë©”ì„œë“œì—ì„œ ì´ˆê¸°í™” ë¡œì§ì„ ìˆ˜í–‰.
- `DisposableBean`ì˜ `destroy()` ë©”ì„œë“œì—ì„œ ì†Œë©¸ ë¡œì§ì„ ìˆ˜í–‰.
- ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ, í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“¤ì–´ **ë¹„ì¶”ì²œ**.

---

### 3) `@Bean` ì„¤ì •ì„ í†µí•œ `initMethod` ë° `destroyMethod`
```java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class LifeCycleConfig {

    @Bean(initMethod = "init", destroyMethod = "cleanup")
    public LifeCycleBean lifeCycleBean() {
        return new LifeCycleBean();
    }
}

class LifeCycleBean {

    public LifeCycleBean() {
        System.out.println("1. ë¹ˆ ê°ì²´ ìƒì„±: LifeCycleBean ìƒì„±ì í˜¸ì¶œ");
    }

    public void init() {
        System.out.println("2. ì´ˆê¸°í™”: init() ë©”ì„œë“œ ì‹¤í–‰");
    }

    public void cleanup() {
        System.out.println("3. ì†Œë©¸: cleanup() ë©”ì„œë“œ ì‹¤í–‰");
    }
}
```
#### ì„¤ëª…
- `@Bean(initMethod = "init", destroyMethod = "cleanup")`ì„ í†µí•´ ì´ˆê¸°í™” ë° ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§ì ‘ ì§€ì • ê°€ëŠ¥.
- ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë¼ì´í”„ì‚¬ì´í´ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ ì—°ì„±ì´ ë†’ìŒ.

---

## 3. ë¹ˆ ìƒëª…ì£¼ê¸°ì˜ í™œìš© ì˜ˆì‹œ
### 1) ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê´€ë¦¬
```java
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DatabaseConnectionManager {
    private Connection connection;

    @PostConstruct
    public void connect() {
        try {
            connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "user", "password");
            System.out.println("âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    @PreDestroy
    public void disconnect() {
        try {
            if (connection != null && !connection.isClosed()) {
                connection.close();
                System.out.println("âŒ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í•´ì œ");
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```
#### ì‚¬ìš© ëª©ì 
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì„¤ì •í•˜ê³ , ì¢…ë£Œ ì‹œ ì—°ê²°ì„ ì•ˆì „í•˜ê²Œ í•´ì œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©.

### 2) ìºì‹œ ì´ˆê¸°í™” ë° ì •ë¦¬
```java
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import java.util.HashMap;
import java.util.Map;

public class CacheManager {
    private Map<String, String> cache = new HashMap<>();

    @PostConstruct
    public void initCache() {
        cache.put("key1", "value1");
        cache.put("key2", "value2");
        System.out.println("ğŸ”„ ìºì‹œ ì´ˆê¸°í™” ì™„ë£Œ");
    }

    @PreDestroy
    public void clearCache() {
        cache.clear();
        System.out.println("ğŸ—‘ï¸ ìºì‹œ ì •ë¦¬ ì™„ë£Œ");
    }
}
```
#### ì‚¬ìš© ëª©ì 
- ë¹ˆì´ ìƒì„±ë  ë•Œ ìºì‹œ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë  ë•Œ ìºì‹œë¥¼ ì •ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€.

---

## 4. ê²°ë¡ 
### âœ… ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì¶”ì²œ ë°©ì‹
| ë°©ë²• | ì¥ì  | ë‹¨ì  |
|------|------|------|
| `@PostConstruct`, `@PreDestroy` | ê°€ì¥ ê¶Œì¥ë˜ëŠ” ë°©ë²•, ìŠ¤í”„ë§ ì˜ì¡´ì„± ì—†ìŒ | Java 9+ì—ì„œëŠ” `javax.annotation` íŒ¨í‚¤ì§€ê°€ ì œê±°ë¨ |
| `InitializingBean`, `DisposableBean` | ê°„ë‹¨í•œ êµ¬í˜„ ê°€ëŠ¥ | ìŠ¤í”„ë§ ì¸í„°í˜ì´ìŠ¤ì— ì¢…ì†ë¨ (ë¹„ì¶”ì²œ) |
| `@Bean(initMethod, destroyMethod)` | ìŠ¤í”„ë§ ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´ ì—†ìŒ, ìœ ì—°ì„± ë†’ìŒ | XML ê¸°ë°˜ ì„¤ì •ì—ì„œëŠ” ë‹¤ì†Œ ë¶ˆí¸í•  ìˆ˜ ìˆìŒ |

### ğŸ“Œ ì¶”ì²œ ë°©ì‹: `@PostConstruct` & `@PreDestroy` ë˜ëŠ” `@Bean(initMethod, destroyMethod)` ì‚¬ìš©!

ìŠ¤í”„ë§ ë¹ˆì˜ ìƒëª…ì£¼ê¸°ë¥¼ ì˜ ì´í•´í•˜ê³  ì ì ˆí•œ ë°©ë²•ì„ ì„ íƒí•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì•ˆì •ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
