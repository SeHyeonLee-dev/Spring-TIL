### **π€ IoC, DIμ ν¨κ³Όλ¥Ό μ λ€λ΅ λ°νν•λ ¤λ©΄ μΈν„°νμ΄μ¤λ¥Ό λ°λ“μ‹ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤**

---

## **1. μΈν„°νμ΄μ¤ μ—†μ΄ DI μ μ©ν• κ²½μ° (μλ»λ μμ‹)**

```java
@Service
public class MemberService {
    private final MemberRepositoryImpl memberRepository; // κµ¬μ²΄μ μΈ κµ¬ν„μ²΄μ— μμ΅΄

    public MemberService(MemberRepositoryImpl memberRepository) { // μ§μ ‘μ μΈ μμ΅΄μ„±
        this.memberRepository = memberRepository;
    }

    public void register(Member member) {
        memberRepository.save(member);
    }
}
```

### β **μΈν„°νμ΄μ¤ μ—†μ΄ DIλ¥Ό μ μ©ν•λ©΄ λ°μƒν•λ” λ¬Έμ μ **
1. **κµ¬ν„μ²΄ λ³€κ²½μ΄ μ–΄λ ¤μ›€**  
   - `MemberRepositoryImpl`μ„ μ§μ ‘ μ°Έμ΅°ν•κ³  μμ–΄μ„, λ‹¤λ¥Έ κµ¬ν„μ²΄(`JpaMemberRepository`, `MockMemberRepository`)λ΅ λ³€κ²½ν•λ ¤λ©΄ `MemberService` μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν•¨.

2. **ν…μ¤νΈκ°€ μ–΄λ ¤μ›€**  
   - Mock κ°μ²΄λ¥Ό μ£Όμ…ν•λ ¤ ν•΄λ„ `MemberRepositoryImpl`λ§ μ‚¬μ©ν•  μ μκΈ° λ•λ¬Έμ— **λ‹¨μ„ ν…μ¤νΈ μ‘μ„±μ΄ μ–΄λ ¤μ›€**.

3. **μ μ§€λ³΄μμ„±κ³Ό ν™•μ¥μ„±μ΄ λ–¨μ–΄μ§**  
   - μƒλ΅μ΄ κΈ°λ¥ μ¶”κ°€(μ: λ‹¤λ¥Έ DB μ—°λ™, μΊμ‹±) μ‹ μ½”λ“ μμ •μ΄ ν•„μ”.

---

## **2. μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν• DI μ μ© (κ¶μ¥λλ” λ°©μ‹)**

```java
// μΈν„°νμ΄μ¤ μ„ μ–Έ
public interface MemberRepository {
    void save(Member member);
}

// κµ¬ν„μ²΄ 1 (μΌλ° DB μ €μ¥)
@Repository
public class MemberRepositoryImpl implements MemberRepository {
    @Override
    public void save(Member member) {
        System.out.println("νμ› μ €μ¥: " + member.getName());
    }
}

// μ„λΉ„μ¤ ν΄λμ¤ - μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μμ΅΄μ„± μ£Όμ…
@Service
public class MemberService {
    private final MemberRepository memberRepository; // μΈν„°νμ΄μ¤μ— μμ΅΄

    public MemberService(MemberRepository memberRepository) { // DI μ μ©
        this.memberRepository = memberRepository;
    }

    public void register(Member member) {
        memberRepository.save(member);
    }
}
```

β… **μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ―€λ΅ κµ¬ν„μ²΄λ¥Ό λ°”κΏ”λ„ `MemberService`λ¥Ό μμ •ν•  ν•„μ” μ—†μ**  
β… **Mock κ°μ²΄λ¥Ό μ‰½κ² μ£Όμ…ν•  μ μμ–΄ ν…μ¤νΈ μ©μ΄**  
β… **κµ¬ν„μ²΄ κµμ²΄(μ: JPA, MyBatis, νμΌ μ €μ¥ λ“±)κ°€ μ©μ΄**  
β… **DIμ μ¥μ μ„ κ·Ήλ€ν™”ν•μ—¬ IoCμ ν¨κ³Όλ¥Ό μ λ€λ΅ ν™μ© κ°€λ¥**  

---

## **3. μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν• DIμ ν¨κ³Ό**

| λΉ„κµ ν•­λ© | μΈν„°νμ΄μ¤ μ—†μ΄ DI μ μ© | μΈν„°νμ΄μ¤ μ‚¬μ©ν• DI μ μ© |
|----------|----------------|----------------|
| **μ μ—°μ„±** | νΉμ • κµ¬ν„μ²΄μ— μΆ…μ† | λ‹¤μ–‘ν• κµ¬ν„μ²΄λ΅ κµμ²΄ κ°€λ¥ |
| **ν…μ¤νΈ μ©μ΄μ„±** | Mock κ°μ²΄ μ‚¬μ© μ–΄λ ¤μ›€ | μ‰½κ² Mock κ°μ²΄ μ£Όμ… κ°€λ¥ |
| **κµ¬ν„μ²΄ κµμ²΄** | `MemberService` μ½”λ“ μμ • ν•„μ” | κµ¬ν„μ²΄λ§ λ³€κ²½ν•λ©΄ λ¨ |
| **ν™•μ¥μ„±** | μƒλ΅μ΄ κΈ°λ¥ μ¶”κ°€ μ–΄λ ¤μ›€ | μƒλ΅μ΄ κµ¬ν„μ²΄ μ¶”κ°€ μ©μ΄ |

---

## **4. μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν• DI μ μ© μ‹ Mock κ°μ²΄ ν™μ© (ν…μ¤νΈ μ©μ΄)**

```java
import static org.mockito.Mockito.*;

public class MemberServiceTest {
    public static void main(String[] args) {
        // 1. Mock κ°μ²΄ μƒμ„±
        MemberRepository mockRepository = mock(MemberRepository.class);
        
        // 2. MemberServiceμ— Mock κ°μ²΄ μ£Όμ…
        MemberService memberService = new MemberService(mockRepository);

        // 3. ν…μ¤νΈ μ‹¤ν–‰
        Member testMember = new Member("John Doe");
        memberService.register(testMember);

        // 4. Mock κ°μ²΄κ°€ save()λ¥Ό νΈμ¶ν–λ”μ§€ κ²€μ¦
        verify(mockRepository).save(testMember);
    }
}
```

β… **μΈν„°νμ΄μ¤ λ•λ¶„μ— μ›ν•λ” κµ¬ν„μ²΄(Mock, Stub)λ¥Ό μ‰½κ² μ£Όμ…ν•  μ μμ**  
β… **ν…μ¤νΈ ν™κ²½μ—μ„ μ‹¤μ  DBμ— μ ‘κ·Όν•μ§€ μ•κ³ λ„ λ‹¨μ„ ν…μ¤νΈ κ°€λ¥**  
β… **Mockito κ°™μ€ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ κ°μ²΄μ λ™μ‘μ„ μ‰½κ² κ²€μ¦ν•  μ μμ**  

---

## **π€ κ²°λ΅ **
β… **IoC, DIμ ν¨κ³Όλ¥Ό μ λ€λ΅ λ°νν•λ ¤λ©΄ μΈν„°νμ΄μ¤λ¥Ό λ°λ“μ‹ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.**  
β… **μΈν„°νμ΄μ¤ μ—†μ΄ DIλ¥Ό μ μ©ν•λ©΄ κΈ°μ΅΄ μ½”λ“μ™€ ν° μ°¨μ΄κ°€ μ—†κ³ , μ μ—°μ„±κ³Ό ν™•μ¥μ„±μ΄ λ¶€μ΅±ν•΄μ§„λ‹¤.**  
β… **μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ μ μ§€λ³΄μμ„±κ³Ό ν…μ¤νΈ μ©μ΄μ„±μ΄ ν–¥μƒλλ‹¤.**  

π‘‰ **μ¦‰, DIλ¥Ό μ μ©ν•  λ• μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ "λμ¨ν• κ²°ν•©(Loosely Coupled)"μ„ μ μ§€ν•λ” ν•µμ‹¬μ΄λ‹¤!** π€

